
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6. Contrôle du FetchBot avec Python &#8212; Explore le sol martien avec le FetchBot!</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/book.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/gtag_0.js"></script>
    <script src="../../_static/gtag_1.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/fetch-rover-small.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7. FetchBot avec caméra" href="../../3_Rover_Camera_Control/Camera_Setup/Camera_Setup.html" />
    <link rel="prev" title="5. Contrôle du FetchBot avec Scratch" href="../FetchBot_Control_Scratch/FetchBot_Control_Scratch.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/fetch-rover-small.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Explore le sol martien avec le FetchBot!</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../Overview.html">
   FetchBot: Rover martien intelligent
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reconnaissance d'images
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../1_Image_Recognition/Image_Recognition/Image_Recognition.html">
   1. Reconnaissance d’images avec la Teachable Machine
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../1_Image_Recognition/Image_Recognition_Scratch/Image_Recognition_Scratch.html">
   2. Reconnaissance d’images avec Scratch
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../1_Image_Recognition/Image_Recognition_Python/Image_Recognition_Python.html">
   3. Reconnaissance d’images avec Python
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Construction du rover
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Rover_Building/Rover_Building.html">
   4. Construction du FetchBot
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../FetchBot_Control_Scratch/FetchBot_Control_Scratch.html">
   5. Contrôle du FetchBot avec Scratch
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   6. Contrôle du FetchBot avec Python
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contrôle intelligent du rover
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../3_Rover_Camera_Control/Camera_Setup/Camera_Setup.html">
   7. FetchBot avec caméra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../3_Rover_Camera_Control/FetchBot_Control_IR_Scratch/FetchBot_Control_IR_Scratch.html">
   8. Contrôle du FetchBot et reconnaissance d’images avec Scratch
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../3_Rover_Camera_Control/FetchBot_Control_IR_Python/FetchBot_Control_IR_Python.html">
   9. Contrôle du FetchBot et reconnaissance d’images avec Python
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ressources complémentaires
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../4_Additional_Resources/Raspberry_Pi/Raspberry_Pi.html">
   10. Raspberry Pi: Prise en main et préparation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../4_Additional_Resources/Python_Notebook.html">
   11. Python Notebook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../4_Additional_Resources/Fetch_Mission_Engineer.html">
   12. Ingénieur mission Fetch
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../4_Additional_Resources/Remote_Control/Remote_Control.html">
   13. Télécommande sur page Web
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../4_Additional_Resources/Rover_Alternatives.html">
   14. Alternatives de rover
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../4_Additional_Resources/FAQ.html">
   15. FAQ
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../4_Additional_Resources/Troubleshooting.html">
   16. Dépannage
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/2_Rover_Building/FetchBot_Control_Python/FetchBot_Control_Python.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/lascientotheque/fetchbot-fr"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/lascientotheque/fetchbot-fr/issues/new?title=Issue%20on%20page%20%2F2_Rover_Building/FetchBot_Control_Python/FetchBot_Control_Python.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/lascientotheque/fetchbot-fr/edit/main/2_Rover_Building/FetchBot_Control_Python/FetchBot_Control_Python.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/lascientotheque/fetchbot-fr/main?urlpath=tree/2_Rover_Building/FetchBot_Control_Python/FetchBot_Control_Python.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/lascientotheque/fetchbot-fr/blob/main/2_Rover_Building/FetchBot_Control_Python/FetchBot_Control_Python.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#broches-de-controle">
   6.1. Broches de contrôle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#faire-avancer-le-robot">
   6.2. Faire avancer le robot
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tester-le-code">
     6.2.1. Tester le code
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fais-tourner-le-robot">
   6.3. Fais tourner le robot
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#utilise-des-fonctions-pour-controler-le-robot">
   6.4. Utilise des fonctions pour contrôler le robot
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pour-aller-plus-loin">
   6.5. Pour aller plus loin
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ressources-complementaires">
   6.6. Ressources complémentaires
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="controle-du-fetchbot-avec-python">
<h1><span class="section-number">6. </span>Contrôle du FetchBot avec Python<a class="headerlink" href="#controle-du-fetchbot-avec-python" title="Permalink to this headline">¶</a></h1>
<p><strong>Objectif:</strong> Faire déplacer le FetchBot avec Python.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p></p></th>
<th class="text-align:left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>Âge</p></td>
<td class="text-align:left"><p>14 à 18 ans</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>Notions abordées</p></td>
<td class="text-align:left"><p>Robotique, programmation avec Python, condition, boucle.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>Durée</p></td>
<td class="text-align:left"><p>4 heures</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>Dispositif pédagogiques</p></td>
<td class="text-align:left"><p>Par groupe de 2</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>Matériel</p></td>
<td class="text-align:left"><p>Un FetchBot, Un laptop/tablette par groupe de 2, avec connexion à Internet</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>Prérequis</p></td>
<td class="text-align:left"><p>1. Connaissances de bases de Python (voir Activité 3 - Reconnaissance d’images avec Python)<br> 2. Avoir construit le FetchBot et s’y être connecté avec VNC viewer (voir Activité 4 - Construction du rover)</p></td>
</tr>
</tbody>
</table>
<div class="section" id="broches-de-controle">
<h2><span class="section-number">6.1. </span>Broches de contrôle<a class="headerlink" href="#broches-de-controle" title="Permalink to this headline">¶</a></h2>
<p>La carte contrôleur de moteur EduKit prend la sortie de certaines broches GPIO (General Purpose Input/Output) du Raspberry Pi et fait tourner les moteurs en avant ou en arrière selon que ces broches sont activées ou désactivées. La carte contrôleur est un type de contrôleur appelé “H Bridge”. Wikipedia propose un bon article sur <a class="reference external" href="https://fr.wikipedia.org/wiki/Pont_en_H">le pont en H </a> si tu veux en savoir plus.</p>
<p>La carte contrôleur de moteur EduKit utilise deux broches pour contrôler le moteur gauche et deux broches pour contrôler le moteur droit. Les broches GPIO 9 et 10 contrôlent le moteur A (le moteur de droite), et les broches 7 et 8 contrôlent le moteur B (le moteur de gauche).</p>
<a class="reference internal image-reference" href="../../_images/GPIOpins.jpg"><img alt="GPIOpins" src="../../_images/GPIOpins.jpg" style="width: 500px;" /></a>
<p>Pour chaque moteur, une broche est utilisée pour faire tourner le moteur vers l’avant. L’autre broche GPIO fait tourner le moteur en arrière. Lorsque les deux broches sont désactivées, ou lorsque les deux broches sont activées, le moteur ne tourne pas.</p>
<p>Pour le FetchBot, tu vas utiliser la broche GPIO 10 pour faire tourner le moteur de droite en avant, et la broche GPIO 9 pour le faire tourner en arrière.</p>
<p>Le moteur de gauche utilise la broche GPIO 8 pour le faire tourner en avant et la broche GPIO 7 pour le faire tourner en arrière</p>
</div>
<div class="section" id="faire-avancer-le-robot">
<h2><span class="section-number">6.2. </span>Faire avancer le robot<a class="headerlink" href="#faire-avancer-le-robot" title="Permalink to this headline">¶</a></h2>
<p>Ouvre l’éditeur Python Thonny, et créé un nouveau fichier en cliquant sur l’icône ‘+’. Copie le code ci-dessous:</p>
<p>Remarque: Tous les textes après les ‘#” sont des commentaires, et tu n’es pas obligé de les recopier. Ils aident cependant à comprendre ce que fait le code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Robot forward</span>
<span class="kn">import</span> <span class="nn">time</span>  <span class="c1"># Import the Time library</span>
<span class="kn">import</span> <span class="nn">gpiozero</span> <span class="c1"># Import the GPIO Zero Library</span>

<span class="n">right_motor</span> <span class="o">=</span> <span class="n">gpiozero</span><span class="o">.</span><span class="n">Motor</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">left_motor</span> <span class="o">=</span> <span class="n">gpiozero</span><span class="o">.</span><span class="n">Motor</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

<span class="c1"># Forward: Turn both motors on with a speed of 0.5</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Wait for 1 seconds</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Turn the motors off</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Sauvegarde le fichier sous le nom ‘1-rover-forward.py’.</p>
<div class="section" id="tester-le-code">
<h3><span class="section-number">6.2.1. </span>Tester le code<a class="headerlink" href="#tester-le-code" title="Permalink to this headline">¶</a></h3>
<p>Remarque : Avant d’exécuter le code, allume la batterie.
Remarque : place ton robot sur un support de manière à ce que les moteurs ne touchent pas le sol. Tu ne veux pas que ton robot tombe du bureau !</p>
<p>Tu es maintenant prêt à exécuter le code. Clique sur le bouton ‘Run’ de l’éditeur Thonny. Si tu constates que le code ne s’exécute pas correctement, il se peut qu’il y ait une erreur dans le code que tu as tapé.</p>
<p>Tu devrais maintenant voir les deux moteurs tourner en avant en même temps. Si un seul moteur tourne, vérifie ton câblage. Si l’un des moteurs tourne en arrière, intervertis les fils rouge et noir de ce moteur dans le bornier. Continue à tester le code jusqu’à ce que les fils soient à la bonne place.</p>
</div>
</div>
<div class="section" id="fais-tourner-le-robot">
<h2><span class="section-number">6.3. </span>Fais tourner le robot<a class="headerlink" href="#fais-tourner-le-robot" title="Permalink to this headline">¶</a></h2>
<p>Pour faire tourner le robot, il suffit de ne faire avancer qu’un moteur:</p>
<ul class="simple">
<li><p>Pour faire tourner le robot à gauche, stoppe le moteur gauche et fais tourner le moteur droit:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Turn left</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Pour faire tourner le robot à droite, stoppe le moteur droit et fais tourner le moteur gauche</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Turn right</span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Dans l’éditeur Thonny, créée un nouveau fichier ‘2-rover-forward-turn.py’ et copie le code ci-dessous. Il permet de faire avancer le FetchBot pendant une seconde, puis de le faire tourner à droite pendant une seconde, puis de le faire tourner à gauche pendant une seconde.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Robot forward, left and right</span>
<span class="kn">import</span> <span class="nn">time</span>  <span class="c1"># Import the Time library</span>
<span class="kn">import</span> <span class="nn">gpiozero</span> <span class="c1"># Import the GPIO Zero Library</span>

<span class="n">right_motor</span> <span class="o">=</span> <span class="n">gpiozero</span><span class="o">.</span><span class="n">Motor</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">left_motor</span> <span class="o">=</span> <span class="n">gpiozero</span><span class="o">.</span><span class="n">Motor</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

<span class="c1"># Forward: Turn both motors on with a speed of 0.5</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Wait for 1 seconds</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Turn the motors off</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># Turn right: Only turn on left motor with a speed of 0.5 </span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Wait for 1 seconds</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Turn the motors off</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># Turn right: Only turn on right motor with a speed of 0.5 </span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># Wait for 1 seconds</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Turn the motors off</span>
<span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="utilise-des-fonctions-pour-controler-le-robot">
<h2><span class="section-number">6.4. </span>Utilise des fonctions pour contrôler le robot<a class="headerlink" href="#utilise-des-fonctions-pour-controler-le-robot" title="Permalink to this headline">¶</a></h2>
<p>Le code ci-dessus est un peu difficile à lire. Tu vas utiliser des fonctions pour faire avancer ou tourner le robot, et rendre le code plus clair.</p>
<p>La fonction pour avancer sera appelée ‘forward’, et prendra comme paramètres la vitesse (speed) et la durée pendant laquelle faire avancer le robot (duration). Par défaut, on mettra les valeurs de 0.5 pour la vitesse, et de 1 seconde pour la durée.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="c1"># Forward: Turn both motors on with the speed &quot;speed&quot;</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>

    <span class="c1"># Wait for &quot;duration&quot; seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="c1"># Turn the motors off</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<p>Pour aller en arrière, créons la fonction <code class="docutils literal notranslate"><span class="pre">backward</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">backward</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="c1"># Backward: Turn both motors on for backward rotation with the speed &quot;speed&quot;</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>

    <span class="c1"># Wait for &quot;duration&quot; seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="c1"># Turn the motors off</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<p>De la même manière, on peut créer deux fonctions pour tourner à droite et tourner à gauche. Appellons-les ‘turn_right’ et ‘turn_left’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">turn_right</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="c1"># right: Turn on right motor backward and left motor forward with a speed of 0.5 </span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>

    <span class="c1"># Wait for &quot;duration&quot; seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="c1"># Turn the motors off</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    
<span class="k">def</span> <span class="nf">turn_left</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="c1"># left: Turn on right motor foward and left motor backward with a speed of 0.5 </span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>

    <span class="c1"># Wait for &quot;duration&quot; seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="c1"># Turn the motors off</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

</pre></div>
</div>
<div class="highlight-{note}Pour notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>Dans l’éditeur Thonny, créée un nouveau fichier ‘motor_control.py’ et copie le code ci-dessous où les fonctions sont utilisées pour contrôler le FetchBot. Avec ces fonctions, tu peux écrire de façon plus claire la suite de déplacements que tu veux faire, par exemple, avancer pendant deux secondes à la vitesse 1, puis tourner à gauche pendant 3 secondes à la vitesse 0.5, puis avancer pendant 1 seconde à la vitesse 0.5.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Robot forward, left and right</span>
<span class="kn">import</span> <span class="nn">time</span>  <span class="c1"># Import the Time library</span>
<span class="kn">import</span> <span class="nn">gpiozero</span> <span class="c1"># Import the GPIO Zero Library</span>

<span class="n">right_motor</span> <span class="o">=</span> <span class="n">gpiozero</span><span class="o">.</span><span class="n">Motor</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">left_motor</span> <span class="o">=</span> <span class="n">gpiozero</span><span class="o">.</span><span class="n">Motor</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="c1"># Forward: Turn both motors on with the speed &quot;speed&quot;</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>

    <span class="c1"># Wait for &quot;duration&quot; seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="c1"># Turn the motors off</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">backward</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="c1"># Backward: Turn both motors on for backward rotation with the speed &quot;speed&quot;</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>

    <span class="c1"># Wait for &quot;duration&quot; seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="c1"># Turn the motors off</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">turn_right</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="c1"># right: Turn on right motor backward and left motor forward with a speed of 0.5 </span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>

    <span class="c1"># Wait for &quot;duration&quot; seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="c1"># Turn the motors off</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    
<span class="k">def</span> <span class="nf">turn_left</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="c1"># left: Turn on right motor foward and left motor backward with a speed of 0.5 </span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>

    <span class="c1"># Wait for &quot;duration&quot; seconds</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="c1"># Turn the motors off</span>
    <span class="n">left_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">right_motor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Crée maintenant un nouveau fichier ‘3-test-rover.py’ où tu importes ce code avec l’instruction <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">motor_control</span></code>.  Tu peux ensuite appeler les fonctions pour contrôler le FetchBot en rajoutant <code class="docutils literal notranslate"><span class="pre">motor_control</span></code> avant le nom de la fonction. Le code est beaucoup plus clair:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import functions for controlling robot</span>
<span class="kn">import</span> <span class="nn">motor_control</span>

<span class="c1"># Move forward</span>
<span class="n">motor_control</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># Turn left</span>
<span class="n">motor_control</span><span class="o">.</span><span class="n">turn_left</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># Move forward</span>
<span class="n">motor_control</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Copie ce code dans le nouveau fichier ‘3-rover-control.py’ et teste-le.</p>
</div>
<div class="section" id="pour-aller-plus-loin">
<h2><span class="section-number">6.5. </span>Pour aller plus loin<a class="headerlink" href="#pour-aller-plus-loin" title="Permalink to this headline">¶</a></h2>
<p>Tu sais maintenant comment faire avancer ou tourner le FetchBot à différentes vitesses, et pour différentes durées. Expérimente avec différents parcours. Pourrais-tu faire le code qui permettrait au robot de faire un itinéraire en forme de carré?</p>
</div>
<div class="section" id="ressources-complementaires">
<h2><span class="section-number">6.6. </span>Ressources complémentaires<a class="headerlink" href="#ressources-complementaires" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/CamJam-EduKit/EduKit3/blob/master/CamJam%20Edukit%203%20-%20GPIO%20Zero/CamJam%20EduKit%203%20-%20Robotics%20Worksheet%203%20(GPIO%20Zero)%20-%20Running%20the%20Motors.pdf">Documentation CamJam EduKit pour le contrôle des moteurs - Introduction</a></p></li>
<li><p><a class="reference external" href="https://github.com/CamJam-EduKit/EduKit3/blob/master/CamJam%20Edukit%203%20-%20GPIO%20Zero/CamJam%20EduKit%203%20-%20Robotics%20Worksheet%203%20(GPIO%20Zero)%20-%20Running%20the%20Motors.pdf">Documentation CamJam EduKit pour le contrôle des moteurs - Faire tourner le robot</a></p></li>
<li><p><a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/recipes.html#motors">Documentation de la librairie GPIO Zero</a></p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./2_Rover_Building/FetchBot_Control_Python"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../FetchBot_Control_Scratch/FetchBot_Control_Scratch.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">5. </span>Contrôle du FetchBot avec Scratch</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../../3_Rover_Camera_Control/Camera_Setup/Camera_Setup.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">7. </span>FetchBot avec caméra</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By <a href="https://www.lascientotheque.be/">La Scientothèque</a>, 2022.<br/>
        
          <div class="extra_footer">
            <p>
License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
</p>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>